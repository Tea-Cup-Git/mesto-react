{"version":3,"sources":["components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/ImagePopup.js","utils/api.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/App.js","index.js","images/logo.svg"],"names":["Header","className","src","headerLogo","alt","CurrentUserContext","React","createContext","Card","_id","link","name","likes","owner","onCardClick","onCardLike","onCardDelete","card","currentUser","useContext","isLiked","some","i","cardLikeButtonClassName","isOwn","cardDeleteButtonClassName","id","onClick","type","length","Main","cards","onEditAvatar","onEditProfile","onAddPlace","avatar","about","map","key","Footer","ImagePopup","cardTitle","cardSrc","isOpen","onClose","api","baseUrl","token","this","_baseUrl","_token","res","ok","json","Promise","reject","status","fetch","headers","authorization","then","_handleResponse","method","body","JSON","stringify","cardID","like","PopupWithForm","title","onSubmit","buttonTitle","isLoading","props","noValidate","children","EditProfilePopup","onUpdateUser","useState","setName","description","setDescription","handleChange","e","target","value","useEffect","preventDefault","minLength","maxLength","pattern","placeholder","defaultValue","onChange","required","EditAvatarPopup","onUpdateAvatar","avatarRef","useRef","current","ref","AddPlacePopup","setTitle","setSrc","App","isEditProfilePopupOpen","setEditProfilePopupOpen","isAddPlacePopupOpen","setAddPlacePopupOpen","isEditAvatarPopupOpen","setEditAvatarPopupOpen","selectedCard","setSelectedCard","setCurrentUser","setCards","setIsLoading","closeAllPopups","all","getUserInfo","getInitialCards","dataUser","dataCards","catch","err","console","error","Provider","changeLikeCardStatus","newCard","newCards","c","removeCard","filter","setUserInfo","addCard","setUserAvatar","dataAvatar","ReactDOM","render","StrictMode","document","getElementById","module","exports"],"mappings":"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","file":"static/js/main.d8965974.chunk.js","sourcesContent":["import React from 'react';\nimport headerLogo from '../images/logo.svg';\n\nfunction Header() {\n  return (\n    <header className=\"header\">\n      <img className=\"header__logo\" src={headerLogo} alt=\"Mesto. Russia\" />\n    </header>\n  )\n}\n\nexport default Header;\n","import React from 'react';\r\n\r\nexport const CurrentUserContext = React.createContext();","import React from 'react';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext'\n\nfunction Card({ _id, link, name, likes, owner, onCardClick, onCardLike, onCardDelete }) {\n  const card = { _id: _id, link: link, name: name, owner: owner, likes: likes };\n  const currentUser = React.useContext(CurrentUserContext);\n  const isLiked = likes.some(i => i._id === currentUser._id);\n  const cardLikeButtonClassName = (\n    `card__like-button ${isLiked ? 'card__like-button_active' : ''}`\n  );\n  const isOwn = owner._id === currentUser._id;\n  const cardDeleteButtonClassName = (\n    `card__trash-button ${isOwn ? '' : 'card__trash-button_hidden'}`\n  );\n\n  function handleClick() {\n    onCardClick(card);\n  }\n\n  function handleCardLike() {\n    onCardLike(card);\n  }\n\n  function handleDeleteClick() {\n    onCardDelete(card)\n  }\n\n  return (\n    <div id=\"card-template\">\n      <div className=\"card\">\n        <img className=\"card__image\" src={link} alt={name} onClick={handleClick} />\n        <p className=\"card__name\">{name}</p>\n        <button className={cardDeleteButtonClassName} type=\"button\" onClick={handleDeleteClick} />\n        <div className=\"card__likes\">\n          <button className={cardLikeButtonClassName} type=\"button\" onClick={handleCardLike} />\n          <p className=\"card__like-count\">{likes.length}</p>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default Card;\n","import React from 'react';\nimport Card from './Card';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nfunction Main({ cards, onCardClick, onCardLike, onCardDelete, onEditAvatar, onEditProfile, onAddPlace }) {\n  const currentUser = React.useContext(CurrentUserContext);\n\n  return (\n    <main className=\"content\">\n      <section className=\"profile\">\n        <div className=\"profile__avatar-container\">\n          <img className=\"profile__avatar\" src={currentUser.avatar} alt=\"Аватар пользователя\" />\n        </div>\n        <button\n          className=\"profile__avatar-button\"\n          type=\"button\"\n          onClick={onEditAvatar}\n        />\n        <div className=\"profile__info\">\n          <div className=\"profile__button-wrapper\">\n            <h1 className=\"profile__name\">{currentUser.name}</h1>\n            <button\n              className=\"profile__edit-button\"\n              type=\"button\"\n              onClick={onEditProfile}\n            />\n          </div>\n          <p className=\"profile__about\">{currentUser.about}</p>\n        </div>\n        <button\n          className=\"profile__add-button\"\n          type=\"button\"\n          onClick={onAddPlace}\n        />\n      </section>\n      <section className=\"photo-grid\">\n        {cards.map(({_id, link, name, owner, likes}) => \n            <Card \n              key={_id} _id={_id} link={link} name={name} owner={owner} likes={likes}\n              onCardClick={onCardClick} \n              onCardLike={onCardLike} \n              onCardDelete={onCardDelete} \n            />\n          )\n        }\n      </section>\n    </main>\n  )\n}\n\nexport default Main;\n","import React from 'react';\n\nfunction Footer() {\n  return (\n    <footer className=\"footer\">\n      <p className=\"footer__copyright\">&copy; 2020 Mesto Russia</p>\n    </footer>\n  )\n}\n\nexport default Footer;\n","import React from 'react';\n\nfunction ImagePopup({cardTitle, cardSrc, isOpen, onClose}) {\n  return (\n    <div id=\"image-form\" className={`popup ${isOpen && 'popup_open'}`}>\n      <figure className=\"popup__container popup__container_img\">\n        <img className=\"popup__image\" src={cardSrc} alt={`${cardTitle}`} />\n        <figcaption className=\"popup__figcaption\">{`${cardTitle}`}</figcaption>\n        <button\n          id=\"image-expander_close-button\"\n          className=\"popup__close-button\"\n          type=\"reset\"\n          onClick={onClose}\n        />\n      </figure>\n    </div>\n  )\n}\n\nexport default ImagePopup;\n","class Api {\n  constructor({ baseUrl, token}) {\n    this._baseUrl = baseUrl;\n    this._token = token;\n  }\n\n  _handleResponse(res) {\n    if(res.ok) {\n      return res.json();\n    } else {\n      return Promise.reject(`Ошибка: ${res.status}`);\n    }\n  }\n\n  getInitialCards() {\n    return fetch(`${this._baseUrl}/cards`, {\n      headers: {\n        authorization: this._token\n      }\n    })\n      .then(this._handleResponse)\n  }\n\n  addCard({ name, link, alt }) {\n    return fetch(`${this._baseUrl}/cards`, {\n      method: 'POST',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        name,\n        link,\n        alt\n      })\n    })\n      .then(this._handleResponse)\n  }\n\n  removeCard(cardID) {\n    return fetch(`${this._baseUrl}/cards/${cardID}`, {\n      method: 'DELETE',\n      headers: {\n        authorization: this._token,\n      }\n    })\n      .then(this._handleResponse)\n  }\n\n  getUserInfo() {\n    return fetch(`${this._baseUrl}/users/me`, {\n      headers: {\n        authorization: this._token\n      }\n    })\n      .then(this._handleResponse)\n  }\n\n  setUserInfo({ name, about }) {\n    return fetch(`${this._baseUrl}/users/me`, {\n      method: 'PATCH',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        name,\n        about\n      })\n    })\n      .then(this._handleResponse)\n  }\n\n  setUserAvatar({ avatar }) {\n    return fetch(`${this._baseUrl}/users/me/avatar`, {\n      method: 'PATCH',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        avatar\n      })\n    })\n      .then(this._handleResponse)\n  }\n\n  changeLikeCardStatus(cardID, like) {\n    return fetch(`${this._baseUrl}/cards/likes/${cardID}`, {\n      method: like ? 'PUT' : 'DELETE',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      }\n    })\n      .then(this._handleResponse)\n  }\n}\n\nconst api = new Api({\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-13',\n  token: '05e19680-152e-4468-99ab-dd133195a5d0'\n})\n\nexport default api;\n","import React from 'react';\n\nfunction PopupWithForm({name, title, isOpen, onClose, onSubmit, buttonTitle, isLoading, ...props}) {\n  return (\n    <div id={`${name}-form`} className={`popup ${isOpen && 'popup_open'}`}>\n      <form id={`${name}-form_container`} className=\"popup__container\" onSubmit={onSubmit} noValidate>\n        <h2 className=\"popup__header\">{title}</h2>\n        {props.children}\n        <button className=\"popup__submit-button\" type=\"submit\">{isLoading === true ? 'Загрузка...' : buttonTitle}</button>\n        <button\n          className=\"popup__close-button\"\n          type=\"reset\"\n          onClick={onClose}\n        />\n      </form>\n    </div>\n  )\n}\n\nexport default PopupWithForm;\n","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction EditProfilePopup({ isOpen, onClose, onUpdateUser, isLoading }) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  const [name, setName] = React.useState('');\r\n  const [description, setDescription] = React.useState('');\r\n\r\n  React.useEffect(() => {\r\n    setName(currentUser.name);\r\n    setDescription(currentUser.about);\r\n  }, [currentUser]);\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onUpdateUser(name, description);\r\n  }\r\n  \r\n  function handleChange(e) {\r\n    e.target.name === 'userName' ? setName(e.target.value) : setDescription(e.target.value);\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"edit\"\r\n      title=\"Редактировать профиль\"\r\n      buttonTitle=\"Сохранить\"\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      isLoading={isLoading}\r\n    >\r\n      <input id=\"user-input\" className=\"popup__input popup__input_type_user-name\"\r\n        name=\"userName\" type=\"text\" minLength=\"2\" maxLength=\"40\" pattern=\"[a-zA-Zа-яА-Я -]{1,}\"\r\n        placeholder=\"Имя\" defaultValue={name} onChange={handleChange} required />\r\n      <span id=\"user-input-error\" className=\"popup__input-error\"></span>\r\n      <input id=\"about-input\" className=\"popup__input popup__input_type_user-about\"\r\n        name=\"userAbout\" type=\"text\" minLength=\"2\" maxLength=\"200\" \r\n        placeholder=\"О себе\" defaultValue={description} onChange={handleChange} required />\r\n      <span id=\"about-input-error\" className=\"popup__input-error\"></span>\r\n    </PopupWithForm>\r\n  )\r\n}\r\n\r\nexport default EditProfilePopup;\r\n","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction EditAvatarPopup({ isOpen, onClose, onUpdateAvatar, isLoading }) {\r\n    const avatarRef = React.useRef();\r\n\r\n    React.useEffect(() => {\r\n      avatarRef.current.value = '';\r\n    }, [isOpen])\r\n\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n        onUpdateAvatar(avatarRef.current.value);\r\n    }\r\n\r\n    return (\r\n      <PopupWithForm\r\n        name=\"avatar\"\r\n        title=\"Обновить аватар\"\r\n        buttonTitle=\"Сохранить\"\r\n        isOpen={isOpen}\r\n        onClose={onClose}\r\n        onSubmit={handleSubmit}\r\n        isLoading={isLoading}\r\n      >\r\n        <input id=\"avatar-input\" className=\"popup__input popup__input_type_image-link\"\r\n            name=\"userAvatar\" type=\"url\" placeholder=\"Ссылка на изображение\" ref={avatarRef} required />\r\n        <span id=\"avatar-input-error\" className=\"popup__input-error\"></span>\r\n      </PopupWithForm>\r\n    )\r\n}\r\n\r\nexport default EditAvatarPopup;","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction AddPlacePopup({ isOpen, onClose, onAddPlace, isLoading }) {\r\n  const [title, setTitle] = React.useState('');\r\n  const [src, setSrc] = React.useState('');\r\n\r\n  React.useEffect(() => {\r\n    setTitle('');\r\n    setSrc('');\r\n  }, [isOpen])\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onAddPlace(title, src);\r\n  }\r\n\r\n  function handleTitleChange(e) {\r\n    setTitle(e.target.value);\r\n  }\r\n\r\n  function handleSrcChange(e) {\r\n    setSrc(e.target.value);\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"add\"\r\n      title=\"Новое место\"\r\n      buttonTitle=\"Сохранить\"\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      isLoading={isLoading}\r\n    >\r\n      <input id=\"name-input\" className=\"popup__input popup__input_type_place-name\"\r\n            name=\"cardName\" type=\"text\" minLength=\"1\" maxLength=\"30\"placeholder=\"Название\" \r\n            value={title} onChange={handleTitleChange} required />\r\n      <span id=\"name-input-error\" className=\"popup__input-error\"></span>\r\n      <input id=\"link-input\" className=\"popup__input popup__input_type_image-link\"\r\n            name=\"cardLink\" type=\"url\" placeholder=\"Ссылка на изображение\" \r\n            value={src} onChange={handleSrcChange} required />\r\n      <span id=\"link-input-error\" className=\"popup__input-error\"></span>\r\n    </PopupWithForm>\r\n  )\r\n}\r\n\r\nexport default AddPlacePopup;","import React from 'react';\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\nimport ImagePopup from './ImagePopup';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport api from '../utils/api';\nimport EditProfilePopup from './EditProfilePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport AddPlacePopup from './AddPlacePopup';\n// import DeletePopup from './DeletePopup'; (В разработке)\nimport { renderLoading } from \"../utils/utils\";\n\nfunction App() {\n  const [isEditProfilePopupOpen, setEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setEditAvatarPopupOpen] = React.useState(false);\n  // const [isDeletePopupOpen, setDeletePopupOpen] = React.useState(false); (В разработке)\n  const [selectedCard, setSelectedCard] = React.useState({isOpen: false});\n  const [currentUser, setCurrentUser] = React.useState('');\n  const [cards, setCards] = React.useState([]);\n  const [isLoading, setIsLoading] = React.useState(false);\n\n  React.useEffect(() => {\n    Promise.all([ api.getUserInfo(), api.getInitialCards() ])\n      .then(([dataUser, dataCards]) => {\n        setCurrentUser(dataUser);\n        setCards(dataCards);\n      })\n      .catch((err) => console.error(`Ошибка при загрузке данных: ${err}`));\n  }, [])\n\n  function handleEditProfileClick() {\n    setEditProfilePopupOpen(true);\n  }\n\n  function handleAddPlaceClick() {\n    setAddPlacePopupOpen(true);\n  }\n\n  function handleEditAvatarClick() {\n    setEditAvatarPopupOpen(true);\n  }\n\n  // Подтверждение удаления карточки (В разработке)\n  // function handleDeleteClick() {\n  //   setDeletePopupOpen(true);\n  // }\n\n  // Развернуть картинку\n  function handleCardClick(card) {\n    setSelectedCard({ isOpen: true, src: card.link, title: card.name });\n  }\n\n  // Добавить/убрать лайк карточки \n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n    api.changeLikeCardStatus(card._id, !isLiked)\n      .then(newCard => {\n        const newCards = cards.map(c => c._id === card._id ? newCard : c);\n        setCards(newCards);\n      })\n      .catch((err) => console.error(`Ошибка при обновлении лайка: ${err}`));\n  }\n\n  // Удалить карточку\n  function handleCardDelete(card) {\n    api.removeCard(card._id)\n      .then(() => {\n        setCards(cards.filter(c => c._id !== card._id));\n      })\n      .catch((err) => console.error(`Ошибка при удалении карточки: ${err}`))\n  }\n\n  // Добавить карточку\n  function handleAddPlaceSubmit(title, src) {\n    setIsLoading(true);\n    api.addCard({ name: title, link: src, alt: title })\n      .then((newCard) => {\n        setCards([newCard, ...cards]);\n        closeAllPopups();\n      })\n      .catch((err) => console.error(`Ошибка при добавлении карточки: ${err}`))\n  }\n\n  // Обновить данные пользователя\n  function handleUpdateUser(name, description) {\n    setIsLoading(true);\n    api.setUserInfo({name: name, about: description})\n      .then(dataUser => {\n        setCurrentUser(dataUser);\n        closeAllPopups();\n      })\n      .catch((err) => console.error(`Ошибка при обновлении данных: ${err}`))\n  }\n  \n  // Обновить аватар пользователя\n  function handleUpdateAvatar(avatar) {\n    setIsLoading(true);\n    api.setUserAvatar({ avatar: avatar })\n    .then(dataAvatar => {\n      setCurrentUser(dataAvatar);\n      closeAllPopups();\n    })\n    .catch((err) => console.error(`Ошибка при обновлении аватара: ${err}`))\n  }\n\n  // Закрыть модальное окно\n  function closeAllPopups() {\n    setEditProfilePopupOpen(false);\n    setAddPlacePopupOpen(false);\n    setEditAvatarPopupOpen(false);\n    setSelectedCard({isOpen: false});\n    setIsLoading(false);\n  }\n\n  return (\n    <div className=\"page\">\n      <div className=\"page__content\">\n        <CurrentUserContext.Provider value={currentUser}>\n          <Header />\n          <Main\n            onEditProfile={handleEditProfileClick}\n            onAddPlace={handleAddPlaceClick}\n            onEditAvatar={handleEditAvatarClick}\n            onCardClick={handleCardClick}\n            onCardLike={handleCardLike}\n            onCardDelete={handleCardDelete}\n            cards={cards}\n          />\n          <EditProfilePopup\n            isOpen={isEditProfilePopupOpen}\n            onClose={closeAllPopups}\n            onUpdateUser={handleUpdateUser}\n            isLoading={isLoading}\n          />\n          <AddPlacePopup\n            isOpen={isAddPlacePopupOpen}\n            onClose={closeAllPopups}\n            onAddPlace={handleAddPlaceSubmit}\n            isLoading={isLoading}\n          />\n          <EditAvatarPopup \n            isOpen={isEditAvatarPopupOpen} \n            onClose={closeAllPopups} \n            onUpdateAvatar={handleUpdateAvatar}\n            isLoading={isLoading}\n          />\n          <ImagePopup\n            cardSrc={selectedCard.src}\n            cardTitle={selectedCard.title}\n            isOpen={selectedCard.isOpen}\n            onClose={closeAllPopups}\n          />\n          {/* <DeletePopup\n            isOpen={isDeletePopupOpen}\n            onClose={closeAllPopups}\n            onDeleteConfirm={handleCardDelete}\n          /> */}\n          <Footer />\n        </CurrentUserContext.Provider>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n","module.exports = __webpack_public_path__ + \"static/media/logo.855a8c98.svg\";"],"sourceRoot":""}